{% extends "review/base.html" %}
{% block content %}
	<p><a class="btn btn-default" href="{% url 'index' %}">&laquo; back</a></p>
	<h1>{{ question.title }}</h1>
	

	{% if error_message %}
	<div class="alert alert-danger" role="alert">
			<p><strong>{{ error_message }}</strong></p>
	</div>
	{% endif %}

	<p><em>{{ question.text|safe }}</em></p>
	{% for comment in question.get_comments %}
		<div style="margin-left:20px;">
			<p>{{ comment.text|safe }}</p>
			<p>{{ comment.create_date }}</p>
		</div>
	{% endfor %}

	<hr />
	<div class="container">
	{% for response in responses %}
		{% if response.selected_answer %}
			<span class="glyphicon glyphicon-ok"></span>
		{% endif %}
		{% if response.is_staff %}
			<p class="staff-question">{{ response.text|safe }}</p>
		{% else %}
			<p>{{ response.text|safe }}</p>
		{% endif %}
		<p><em>Answered {{ response.modified_date }} by {{ response.get_user }}</em></p>

		{% if user == response.question.user and not response.question.has_answer%}
			<a href="{% url 'set_as_answer' response.id %}"><p style="color: green">Set as answer</p></a>
		{% endif %}
		{% for comment in response.get_comments %}
			<div style="margin-left:20px;">
				<p>{{ comment.text|safe }}</p>
				<p>{{ comment.create_date }}</p>
			</div>
		{% endfor %}
		<hr />
	{% endfor %}
	</div>
	
	<form method="post" enctype="multipart/form-data">
		<div class="form-group">
		    {% csrf_token %}
		    {{ form.as_p }}
			<input type="submit" value="Post" />
		</div>
	</form>
	

{% endblock %}